const _0x3c6051=_0x5203;(function(_0x27a999,_0x1712bb){const _0x4c0acf=_0x5203,_0x580b76=_0x27a999();while(!![]){try{const _0x1561f3=-parseInt(_0x4c0acf(0x19f))/0x1*(-parseInt(_0x4c0acf(0x1c8))/0x2)+parseInt(_0x4c0acf(0x1a4))/0x3*(parseInt(_0x4c0acf(0x18f))/0x4)+parseInt(_0x4c0acf(0x197))/0x5+parseInt(_0x4c0acf(0x1b5))/0x6*(-parseInt(_0x4c0acf(0x19e))/0x7)+-parseInt(_0x4c0acf(0x19c))/0x8+-parseInt(_0x4c0acf(0x1b6))/0x9*(parseInt(_0x4c0acf(0x1af))/0xa)+parseInt(_0x4c0acf(0x1c3))/0xb*(parseInt(_0x4c0acf(0x1c1))/0xc);if(_0x1561f3===_0x1712bb)break;else _0x580b76['push'](_0x580b76['shift']());}catch(_0xf63f34){_0x580b76['push'](_0x580b76['shift']());}}}(_0x305d,0x71d1e));const siofu=require('socketio-file-upload'),fs=require('fs'),path=require(_0x3c6051(0x1b4));let meetings=[];function handleJoin(_0x38efda,_0x29c859){const _0x4a7763=_0x3c6051;_0x38efda[_0x4a7763(0x1b8)]=_0x29c859[_0x4a7763(0x1b8)],_0x38efda[_0x4a7763(0x198)]=_0x29c859[_0x4a7763(0x198)],_0x38efda[_0x4a7763(0x1b9)](_0x29c859[_0x4a7763(0x1b8)]),_0x29c859[_0x4a7763(0x195)]=_0x38efda['id'],sendToMeeting(_0x38efda,_0x29c859),handleFileTransfer(_0x38efda,_0x29c859[_0x4a7763(0x1b8)]);}function _0x305d(){const _0x40b874=['path','650994qsWiKU','16353rYFtGI','rooms','meetingId','join','../public/file_uploads/','length','isModeratorPresent','answer','username','message','existsSync','1999848RCJPwg','authMode','44lzrZhl','extension','disconnect','kick','saved','94914seNuFN','candidate','connection','mkdirSync','file','listen','error','391188BeEIXC','moderatorRights','MAX_FILESIZE','meta','leave','stringify','socketId','please_wait','4652580oLLkGV','moderator','disabled','clientDetail','sockets','3408440ylQsye','whiteboard','49EubLQK','5OicCbr','currentTime','base','not_started','offer','9kiHYki','raiseHand','checkMeetingResult','permission','toSocketId','info','recordingPermission','dir','recordongPermissionResult','broadcast','sync','2620tjyBQh','adapter','emit','meetingMessage','parse'];_0x305d=function(){return _0x40b874;};return _0x305d();}function _0x5203(_0x5b34cf,_0x90800c){const _0x305d07=_0x305d();return _0x5203=function(_0x5203d6,_0x197d97){_0x5203d6=_0x5203d6-0x18a;let _0x491ffa=_0x305d07[_0x5203d6];return _0x491ffa;},_0x5203(_0x5b34cf,_0x90800c);}function handleDisconnect(_0x319cf7,_0x13efa0){const _0x5643cd=_0x3c6051;let _0x521a45=path[_0x5643cd(0x1b9)](__dirname,_0x5643cd(0x1ba)+_0x319cf7[_0x5643cd(0x1b8)]);!_0x13efa0[_0x5643cd(0x19b)][_0x5643cd(0x1b0)][_0x5643cd(0x1b7)][_0x319cf7[_0x5643cd(0x1b8)]]&&fs[_0x5643cd(0x1c0)](_0x521a45)&&fs['rmdirSync'](_0x521a45,{'recursive':!![]});if(_0x319cf7[_0x5643cd(0x198)])delete meetings[_0x319cf7['meetingId']];_0x319cf7['leave'](_0x319cf7[_0x5643cd(0x1b8)]),sendToMeeting(_0x319cf7,{'type':_0x5643cd(0x193),'fromSocketId':_0x319cf7['id'],'isModerator':_0x319cf7['moderator']});}function handleCheckMeeting(_0x5e5937,_0x51cb4c,_0x629a29){const _0x19ed5a=_0x3c6051;let _0x29468d=!_0x629a29[_0x19ed5a(0x19b)][_0x19ed5a(0x1b0)][_0x19ed5a(0x1b7)][_0x51cb4c['meetingId']]||_0x629a29['sockets'][_0x19ed5a(0x1b0)][_0x19ed5a(0x1b7)][_0x51cb4c['meetingId']][_0x19ed5a(0x1bb)]<process['env']['USER_LIMIT_PER_MEETING'];if(_0x29468d){if(_0x51cb4c[_0x19ed5a(0x1c2)]==_0x19ed5a(0x199)||_0x51cb4c[_0x19ed5a(0x198)]||_0x51cb4c[_0x19ed5a(0x190)]=='disabled')meetings[_0x51cb4c[_0x19ed5a(0x1b8)]]={'isModeratorPresent':!![],'moderator':_0x5e5937['id']},sendToPeer(_0x629a29,{'type':_0x19ed5a(0x1a6),'result':!![],'toSocketId':_0x5e5937['id'],'message':''});else meetings[_0x51cb4c[_0x19ed5a(0x1b8)]]&&meetings[_0x51cb4c[_0x19ed5a(0x1b8)]][_0x19ed5a(0x1bc)]?(sendToPeer(_0x629a29,{'type':_0x19ed5a(0x1a7),'toSocketId':meetings[_0x51cb4c['meetingId']][_0x19ed5a(0x198)],'fromSocketId':_0x5e5937['id'],'username':_0x51cb4c['username']}),sendToPeer(_0x629a29,{'type':_0x19ed5a(0x1a9),'toSocketId':_0x5e5937['id'],'message':_0x19ed5a(0x196)})):sendToPeer(_0x629a29,{'type':_0x19ed5a(0x1a6),'result':![],'toSocketId':_0x5e5937['id'],'message':_0x19ed5a(0x1a2)});}else sendToPeer(_0x629a29,{'type':_0x19ed5a(0x1a6),'result':![],'toSocketId':_0x5e5937['id'],'message':'meeting_full'});}function handleRecordingPermission(_0x15730a,_0x1c0bb7,_0x38a78b){const _0x412f24=_0x3c6051;sendToPeer(_0x38a78b,{'type':_0x412f24(0x1aa),'toSocketId':meetings[_0x1c0bb7['meetingId']][_0x412f24(0x198)],'fromSocketId':_0x15730a['id'],'username':_0x1c0bb7['username']}),sendToPeer(_0x38a78b,{'type':'info','toSocketId':_0x15730a['id'],'message':_0x412f24(0x196)});}function sendToPeer(_0x34f3a3,_0x31fae3){const _0x3f7a3c=_0x3c6051;_0x34f3a3['to'](_0x31fae3[_0x3f7a3c(0x1a8)])['emit'](_0x3f7a3c(0x1bf),JSON[_0x3f7a3c(0x194)](_0x31fae3));}function sendToMeeting(_0x4afec4,_0x57fdbb){const _0x20190e=_0x3c6051;_0x4afec4[_0x20190e(0x1ad)]['to'](_0x4afec4[_0x20190e(0x1b8)])[_0x20190e(0x1b1)](_0x20190e(0x1bf),JSON[_0x20190e(0x194)](_0x57fdbb));}function handleFileTransfer(_0x194516,_0x32394d){const _0x361fd4=_0x3c6051;let _0x28ca4e=path['join'](__dirname,_0x361fd4(0x1ba));!fs['existsSync'](_0x28ca4e)&&fs['mkdirSync'](_0x28ca4e);let _0x4cc9fe=new siofu();_0x4cc9fe[_0x361fd4(0x1ab)]=path['join'](__dirname,_0x361fd4(0x1ba)+_0x32394d),!fs[_0x361fd4(0x1c0)](_0x4cc9fe[_0x361fd4(0x1ab)])&&fs[_0x361fd4(0x18b)](_0x4cc9fe[_0x361fd4(0x1ab)]),_0x4cc9fe['maxFileSize']=process['env'][_0x361fd4(0x191)]*0x400*0x400,_0x4cc9fe[_0x361fd4(0x18d)](_0x194516),_0x4cc9fe['on'](_0x361fd4(0x1c7),function(_0x2fb10a){const _0x556f91=_0x361fd4;_0x2fb10a[_0x556f91(0x18c)][_0x556f91(0x19a)][_0x556f91(0x18c)]=_0x2fb10a[_0x556f91(0x18c)][_0x556f91(0x1a1)],_0x2fb10a[_0x556f91(0x18c)]['clientDetail'][_0x556f91(0x1c4)]=_0x2fb10a['file'][_0x556f91(0x192)][_0x556f91(0x1c4)],_0x2fb10a[_0x556f91(0x18c)][_0x556f91(0x19a)]['username']=_0x2fb10a[_0x556f91(0x18c)][_0x556f91(0x192)][_0x556f91(0x1be)],_0x194516[_0x556f91(0x1ad)]['to'](_0x32394d)[_0x556f91(0x1b1)](_0x556f91(0x18c),{'file':_0x2fb10a[_0x556f91(0x18c)][_0x556f91(0x1a1)],'extension':_0x2fb10a[_0x556f91(0x18c)][_0x556f91(0x192)][_0x556f91(0x1c4)],'username':_0x2fb10a[_0x556f91(0x18c)][_0x556f91(0x192)][_0x556f91(0x1be)]});}),_0x4cc9fe['on'](_0x361fd4(0x18e),function(_0x374a6c){});}module['exports']=function(_0x55d225){const _0x4fbf3b=_0x3c6051;_0x55d225['sockets']['on'](_0x4fbf3b(0x18a),function(_0x5a87d4){const _0x5293b1=_0x4fbf3b;_0x5a87d4['on'](_0x5293b1(0x1bf),function(_0x121bd6){const _0x3c9c31=_0x5293b1;_0x121bd6=JSON[_0x3c9c31(0x1b3)](_0x121bd6);switch(_0x121bd6['type']){case _0x3c9c31(0x1b9):handleJoin(_0x5a87d4,_0x121bd6);break;case'checkMeeting':handleCheckMeeting(_0x5a87d4,_0x121bd6,_0x55d225);break;case _0x3c9c31(0x1aa):handleRecordingPermission(_0x5a87d4,_0x121bd6,_0x55d225);break;case _0x3c9c31(0x1a3):case _0x3c9c31(0x1bd):case _0x3c9c31(0x1c9):case _0x3c9c31(0x1bf):case'permissionResult':case _0x3c9c31(0x1ac):case _0x3c9c31(0x1a0):case _0x3c9c31(0x1c6):sendToPeer(_0x55d225,_0x121bd6);break;case _0x3c9c31(0x1b2):case _0x3c9c31(0x19d):case'clearWhiteboard':case _0x3c9c31(0x1a5):case _0x3c9c31(0x1ae):sendToMeeting(_0x5a87d4,_0x121bd6);break;}}),_0x5a87d4['on'](_0x5293b1(0x1c5),function(){handleDisconnect(_0x5a87d4,_0x55d225);});});};